<!doctype html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Feliz CumpleaÃ±os ðŸŒ¼</title>
  <style>
    :root{
      --bg1:#0b1020;
      --bg2:#1b2a4a;
      --petal:#ffd84d;       /* amarillo pÃ©talo */
      --petal2:#ffbf2f;      /* sombra */
      --center:#7a4b1a;      /* centro flor */
      --center2:#a66b2a;
      --stem:#2fbf71;
      --leaf:#27a95f;
      --text:#ffffff;
      --delayStep:120ms;       /**/
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      background: radial-gradient(1200px 700px at 30% 20%, #233a6b 0%, transparent 60%),
                  radial-gradient(900px 600px at 70% 70%, #182a55 0%, transparent 55%),
                  linear-gradient(180deg, var(--bg1), var(--bg2));
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      overflow:hidden;
      color:var(--text);
    }

    .wrap{
      width:min(900px, 92vw);
      display:grid;
      grid-template-rows:auto auto;
      gap:20px;
      justify-items:center;
      padding:24px 18px;
    }

    /* ====== TEXTO ====== */
    .title{
      font-size: clamp(28px, 6vw, 64px);
      font-weight: 800;
      letter-spacing: 0.02em;
      text-align:center;
      line-height:1.05;
      margin:0;
      text-shadow: 0 8px 30px rgba(0,0,0,.35);
    }
    .title .char{
      display:inline-block;
      opacity:0;
      transform: translateY(18px) scale(.96);
      filter: blur(4px);
      animation: popChar 520ms cubic-bezier(.2,.9,.2,1) forwards;
      animation-delay: calc(var(--i) * var(--delayStep));
      will-change: transform, opacity, filter;
    }
    /* mantener espacios */
    .title .space{
      width: .35em;
    }

    @keyframes popChar{
      to{
        opacity:1;
        transform: translateY(0) scale(1);
        filter: blur(0);
      }
    }

    /* ====== FLOR ====== */
    .scene{
      width:min(420px, 70vw);
      height:min(520px, 78vh);
      position:relative;
      display:grid;
      place-items:center;
      padding-top:10px;
    }

    .flower{
      position:relative;
      width: min(280px, 60vw);
      aspect-ratio: 1 / 1;
      display:grid;
      place-items:center;
      filter: drop-shadow(0 18px 28px rgba(0,0,0,.35));
    }

    .petal{
      position:absolute;
      width: 46%;
      height: 22%;
      left:50%;
      top:50%;
      transform-origin: 0% 50%;
      transform: translate(-2%, -50%) rotate(var(--rot)) scale(.2);
      border-radius: 999px;
      background: radial-gradient(120% 120% at 30% 30%, #fff7b0 0%, var(--petal) 35%, var(--petal2) 100%);
      opacity:0;
      animation: petalIn 520ms cubic-bezier(.2,.95,.2,1) forwards;
      animation-delay: calc(var(--i) * var(--delayStep));
      will-change: transform, opacity;
    }

    @keyframes petalIn{
      0%{
        opacity:0;
        transform: translate(-2%, -50%) rotate(var(--rot)) scale(.15);
      }
      70%{
        opacity:1;
        transform: translate(-2%, -50%) rotate(var(--rot)) scale(1.06);
      }
      100%{
        opacity:1;
        transform: translate(-2%, -50%) rotate(var(--rot)) scale(1);
      }
    }

    .center{
      position:absolute;
      width: 26%;
      height: 26%;
      border-radius: 50%;
      background: radial-gradient(120% 120% at 30% 30%, #ffd9a6 0%, var(--center2) 35%, var(--center) 100%);
      box-shadow: inset 0 10px 18px rgba(0,0,0,.18);
      transform: scale(.2);
      opacity:0;
      animation: centerIn 650ms cubic-bezier(.2,.95,.2,1) forwards;
      animation-delay: calc(var(--total) * var(--delayStep));
    }
    @keyframes centerIn{
      to{ transform: scale(1); opacity:1; }
    }

    /* tallo + hojas */
    .stem{
      position:absolute;
      width: 12px;
      height: 55%;
      top: 62%;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(180deg, #37d983, var(--stem));
      border-radius: 999px;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.25));
      opacity:0;
      animation: stemIn 650ms ease forwards;
      animation-delay: calc((var(--total) + 10) * var(--delayStep));
    }
    @keyframes stemIn{
      from{ opacity:0; transform: translateX(-50%) translateY(-20px) scaleY(.6); }
      to{ opacity:1; transform: translateX(-50%) translateY(0) scaleY(1); }
    }

    .leaf{
      position:absolute;
      width: 34%;
      height: 14%;
      background: radial-gradient(130% 130% at 30% 30%, #c8ffd9 0%, var(--leaf) 35%, #1a7f46 100%);
      border-radius: 999px 999px 999px 60px;
      top: 78%;
      opacity:0;
      animation: leafIn 650ms ease forwards;
      animation-delay: calc((var(--total) + 25) * var(--delayStep));
    }
    .leaf.left{
      left: 16%;
      transform: rotate(-22deg) scale(.6);
      transform-origin: 100% 50%;
    }
    .leaf.right{
      right: 16%;
      transform: rotate(202deg) scale(.6);
      transform-origin: 0% 50%;
    }
    @keyframes leafIn{
      to{ opacity:1; transform: rotate(var(--r,0deg)) scale(1); }
    }
    .leaf.left{ --r:-22deg; }
    .leaf.right{ --r:202deg; }

    /* mini brillo */
    .spark{
      position:absolute;
      inset:0;
      pointer-events:none;
      opacity:.35;
      mix-blend-mode: screen;
      background:
        radial-gradient(6px 6px at 20% 30%, rgba(255,255,255,.8) 0 40%, transparent 60%),
        radial-gradient(4px 4px at 70% 20%, rgba(255,255,255,.8) 0 40%, transparent 60%),
        radial-gradient(5px 5px at 80% 65%, rgba(255,255,255,.75) 0 40%, transparent 60%),
        radial-gradient(4px 4px at 30% 80%, rgba(255,255,255,.7) 0 40%, transparent 60%);
      animation: twinkle 2.2s ease-in-out infinite;
    }
    @keyframes twinkle{
      0%,100%{ transform: scale(1); opacity:.22; }
      50%{ transform: scale(1.02); opacity:.38; }
    }

    /* accesibilidad: reduce motion */
    @media (prefers-reduced-motion: reduce){
      .petal, .title .char, .center, .stem, .leaf, .spark{
        animation: none !important;
        opacity: 1 !important;
        transform: none !important;
        filter:none !important;
      }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <h1 class="title" id="title" aria-label="Feliz CumpleaÃ±os"></h1>

    <div class="scene">
      <div class="flower" id="flower" aria-hidden="true">
        <!-- pÃ©talos via JS -->
        <div class="center" id="center"></div>
      </div>

      <div class="stem" id="stem"></div>
      <div class="leaf left" id="leafL"></div>
      <div class="leaf right" id="leafR"></div>

      <div class="spark" aria-hidden="true"></div>
    </div>
  </div>

  <script>
    // ====== CONFIG ======
    const message = "Feliz CumpleaÃ±os";

    // Para que "tanto pÃ©talos como letras": no contamos espacios
    const lettersOnly = [...message].filter(ch => ch !== " ");
    const total = lettersOnly.length;

    // ====== TEXTO: cada letra con delay 1ms ======
    const title = document.getElementById("title");
    let letterIndex = 0;

    for (const ch of [...message]) {
      const span = document.createElement("span");
      span.className = "char";

      if (ch === " ") {
        span.classList.add("space");
        span.textContent = " ";
        // No consume Ã­ndice de letra (no delay asociado a una "letra")
        span.style.setProperty("--i", letterIndex);
        span.style.opacity = 1;        // que el espacio no "parpadee"
        span.style.transform = "none";
        span.style.filter = "none";
        span.style.animation = "none";
      } else {
        span.textContent = ch;
        span.style.setProperty("--i", letterIndex);
        letterIndex++;
      }
      title.appendChild(span);
    }

    // ====== FLOR: pÃ©talos = nÂº de letras======
    const flower = document.getElementById("flower");
    flower.style.setProperty("--total", total);

    for (let i = 0; i < total; i++) {
      const petal = document.createElement("div");
      petal.className = "petal";
      const rot = (360 / total) * i;
      petal.style.setProperty("--i", i);
      petal.style.setProperty("--rot", `${rot}deg`);
      flower.insertBefore(petal, document.getElementById("center"));
    }
  </script>
</body>
</html>
